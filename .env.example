# ===========================
# Quick Start (Phase 1 Stub)
# ===========================

# The current middleware build only reads the following variables.
# Copy these lines into your local `.env` if you just need the stub server.
NODE_ENV=production
PORT=3000
HOST=0.0.0.0
VISTAR_ENVIRONMENT=staging
ALLOWED_ORIGINS=*
ENABLE_REQUEST_LOGGING=true
ENABLE_METRICS=true
API_RATE_LIMIT=100
CACHE_TTL_SECONDS=60
LOG_LEVEL=info

# ===========================
# Vistar API Configuration
# ===========================

# Vistar Network ID (required)
# Obtain from Vistar Media dashboard: Networks section
VISTAR_NETWORK_ID=your_network_id_here

# Vistar API Key (required)
# Obtain from Vistar Media dashboard: Networks section
VISTAR_API_KEY=your_api_key_here

# Vistar API Base URL
# Staging: https://sandbox-api.vistarmedia.com
# Production: https://api.vistarmedia.com
VISTAR_API_URL=https://sandbox-api.vistarmedia.com

# Environment: staging or production
VISTAR_ENVIRONMENT=staging

# ===========================
# Server Configuration
# ===========================

# Server port
PORT=3000

# Server host (0.0.0.0 for all interfaces, localhost for local only)
HOST=0.0.0.0

# Node environment: development, production, test
NODE_ENV=development

# Base URL for the middleware server (used for PoP callbacks)
# Example: http://middleware-server:3000 or https://your-domain.com
BASE_URL=http://localhost:3000

# ===========================
# Creative Caching
# ===========================

# Cache directory path (must be writable)
# Recommendation: Use absolute path
CACHE_DIR=/var/cache/vistar/creatives

# Cache update interval in milliseconds
# 3600000 = 1 hour, 1800000 = 30 minutes
CACHE_UPDATE_INTERVAL=3600000

# Maximum cache size (e.g., 10GB, 5GB, 1024MB)
CACHE_MAX_SIZE=10GB

# Cache cleanup interval in milliseconds
# 86400000 = 24 hours
CACHE_CLEANUP_INTERVAL=86400000

# Enable/disable creative caching feature
CACHE_ENABLED=true

# ===========================
# DCM Integration
# ===========================

# DCM Database Connection (if monitoring DCM targets)
# Required when integrating with DCM database for device information
DCM_DB_HOST=localhost
DCM_DB_PORT=5432
DCM_DB_NAME=dcm_database
DCM_DB_USER=dcm_user
DCM_DB_PASSWORD=dcm_password

# DCM FTP Server (if using FTP distribution)
DCM_FTP_HOST=localhost
DCM_FTP_PORT=21
DCM_FTP_USER=ftp_user
DCM_FTP_PASSWORD=ftp_password

# ===========================
# Player Configuration
# ===========================

# Default player model if not specified in request
# Options: ME-DEC, USDP-R5000, USDP-R2200, USDP-R1000, USDP-R500
DEFAULT_PLAYER_MODEL=ME-DEC

# Default display dimensions (width x height)
DEFAULT_DISPLAY_WIDTH=1920
DEFAULT_DISPLAY_HEIGHT=1080

# Default spot duration in seconds (must match Vistar campaign settings)
DEFAULT_SPOT_DURATION=15

# ===========================
# Logging
# ===========================

# Log level: error, warn, info, debug, trace
LOG_LEVEL=info

# Log format: json, pretty
LOG_FORMAT=json

# Log file path (leave empty to disable file logging)
LOG_FILE=logs/vistar-middleware.log

# Enable console logging
LOG_CONSOLE=true

# ===========================
# Monitoring & Metrics
# ===========================

# Enable Prometheus metrics endpoint
ENABLE_METRICS=true

# Metrics endpoint port (separate from main server)
METRICS_PORT=9090

# Enable health check endpoint
ENABLE_HEALTH_CHECK=true

# ===========================
# Proof of Play (PoP)
# ===========================

# PoP retry attempts (if initial request fails)
POP_RETRY_ATTEMPTS=3

# PoP retry delay in milliseconds
POP_RETRY_DELAY=5000

# PoP timeout in milliseconds
POP_TIMEOUT=10000

# ===========================
# Request Handling
# ===========================

# Request timeout in milliseconds
REQUEST_TIMEOUT=30000

# Maximum concurrent ad requests
MAX_CONCURRENT_REQUESTS=100

# Enable request rate limiting
ENABLE_RATE_LIMIT=true

# Rate limit: requests per minute per IP
RATE_LIMIT_PER_MINUTE=60

# ===========================
# Security
# ===========================

# Enable CORS (Cross-Origin Resource Sharing)
ENABLE_CORS=true

# Allowed origins for CORS (comma-separated, * for all)
CORS_ORIGINS=*

# API authentication token (optional, for securing middleware endpoints)
API_AUTH_TOKEN=

# ===========================
# Error Handling
# ===========================

# Show detailed error messages in responses (disable in production)
SHOW_ERROR_DETAILS=true

# Error notification webhook URL (optional, for critical errors)
ERROR_WEBHOOK_URL=

# ===========================
# Testing & Development
# ===========================

# Enable debug mode (verbose logging, additional endpoints)
DEBUG_MODE=false

# Mock Vistar API responses (for testing without Vistar connection)
MOCK_VISTAR_API=false

# Test venue ID (for development/testing)
TEST_VENUE_ID=

# Test device ID (for development/testing)
TEST_DEVICE_ID=

# ===========================
# Advanced Configuration
# ===========================

# HTML generation timeout in milliseconds
HTML_GENERATION_TIMEOUT=5000

# Enable creative pre-validation
ENABLE_CREATIVE_VALIDATION=true

# Enable performance profiling
ENABLE_PROFILING=false

# Cleanup temporary files interval in milliseconds
TEMP_CLEANUP_INTERVAL=3600000
